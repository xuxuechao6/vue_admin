{"version":3,"sources":["webpack:///static/js/20.fd87d55ee2da2cfede0d.js","webpack:///./src/views/device/DeviceLog.vue","webpack:///DeviceLog.vue","webpack:///./src/views/device/DeviceLog.vue?de64","webpack:///./src/views/device/DeviceLog.vue?eefa","webpack:///./src/views/device/DeviceLog.vue?6878"],"names":["webpackJsonp","118","module","exports","__webpack_require__","injectStyle","ssrContext","Component","231","__webpack_exports__","Object","defineProperty","value","data","viewList","item","messages","message","channel","mounted","this","$nextTick","detailView","methods","_this","self","DeviceId","sessionStorage","getItem","_url","sign1","sign","md5","$http","url","method","headers","content-type","Rtt-Sign","then","res","console","log","catch","error","response","status","header","ErrCode","$message","send","e","preventDefault","ws","handleLog","WebSocket","onopen","onmessage","evt","handleHome","back","$router","go","handleBack","249","push","i","version","sources","names","mappings","file","sourceRoot","273","content","locals","301","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","_v","staticStyle","float","attrs","type","$event","_e","staticRenderFns"],"mappings":"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","file":"static/js/20.fd87d55ee2da2cfede0d.js","sourcesContent":["webpackJsonp([20],{\n\n/***/ 118:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(273)\n}\nvar Component = __webpack_require__(41)(\n  /* script */\n  __webpack_require__(231),\n  /* template */\n  __webpack_require__(301),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-3119d868\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 231:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  data: function data() {\n    return {\n      viewList: false,\n      item: \"\",\n      messages: [],\n      message: null,\n      channel: 'channel'\n    };\n  },\n  mounted: function mounted() {\n    this.$nextTick(function () {\n      this.detailView();\n    });\n  },\n  methods: {\n    detailView: function detailView() {\n      var _this = this;\n\n      var self = this,\n          DeviceId = sessionStorage.getItem('DeviceId'),\n          _url = \"/logs/\" + DeviceId,\n          _method = \"GET\",\n          sign1 = sessionStorage.getItem('login_TokenId') + _url + _method,\n          sign = this.md5(sign1) + \",\" + sessionStorage.getItem('login_Signature');\n      //将对象转为字符串\n      //签名的 定义过程\n      this.$http({\n        url: \"/iotadmin\" + _url,\n        method: _method,\n        headers: {\n          'content-type': 'application/json',\n          'Rtt-Sign': sign\n        }\n      }).then(function (res) {\n        console.log(res.data);\n        if (res.data == \"\") {\n          _this.viewList = false;\n        } else {\n          _this.viewList = true;\n          _this.item = res.data;\n          console.log(_this.item);\n        }\n      }).catch(function (error) {\n        if (error.response) {\n          console.log(error.response.data);\n          console.log(\"222:\" + error.response.status);\n          console.log(\"333:\" + error.response.header);\n          //请求已经发出，但是服务器响应返回的状态吗不在2xx的范围内\n          if (error.response.data.ErrCode = \"40000004\") {\n            self.$message.error('网络错误，请稍后再试');\n          } else {\n            self.$message.error('网络错误，请稍后再试');\n            return false;\n          }\n        } else {\n          console.log(error);\n          //一些错误是在设置请求的时候触发\n          console.log('Error', error.message);\n          return false;\n        };\n      });\n    },\n    send: function send(e) {\n      e.preventDefault();\n      console.log(this.message);\n      if (this.message) {\n        ws.send(this.message);\n      }\n      this.message = null;\n    },\n\n    handleLog: function handleLog() {\n      var ws = new WebSocket(\"ws://116.62.23.166:8095/log\");\n      console.log(111);\n      ws.onopen = function () {\n        console.log('已连接');\n        // console.log(\"message:\",message)\n        //ws.send(message);\n      };\n      ws.onmessage = function (evt) {\n        console.log(evt.data);\n        //ws.close();\n      };\n      //        ws.onclose = function(evt){console.log('WebSocketClosed!');};\n      //        ws.onerror = function(evt){console.log('WebSocketError!');};\n    },\n    handleHome: function handleHome(back) {\n      this.$router.go(-2);\n    },\n    handleBack: function handleBack(back) {\n      this.$router.go(-1);\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 249:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(105)(true);\n// imports\n\n\n// module\nexports.push([module.i, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"DeviceLog.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 273:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(249);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(106)(\"15ebe63d\", content, true);\n\n/***/ }),\n\n/***/ 301:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', {\n    staticClass: \"ms-doc\"\n  }, [_c('h3', {\n    staticClass: \"clearfix header\"\n  }, [_c('span', {\n    staticClass: \"btn_back\",\n    on: {\n      \"click\": _vm.handleHome\n    }\n  }, [_vm._v(\"设备信息\")]), _vm._v(\"/\"), _c('span', {\n    staticClass: \"btn_back\",\n    on: {\n      \"click\": _vm.handleBack\n    }\n  }, [_vm._v(\"设备详情\")]), _vm._v(\"/设备日志\\n\\n      \"), _c('el-button', {\n    staticStyle: {\n      \"float\": \"right\"\n    },\n    attrs: {\n      \"type\": \"info\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.handleLog()\n      }\n    }\n  }, [_vm._v(\"获取实时LOG\")])], 1), _vm._v(\" \"), _c('article', [(_vm.viewList) ? _c('span', [_vm._v(\"暂无数据\")]) : _vm._e()])])])\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/20.fd87d55ee2da2cfede0d.js","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3119d868\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./DeviceLog.vue\")\n}\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./DeviceLog.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3119d868\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./DeviceLog.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-3119d868\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/device/DeviceLog.vue\n// module id = 118\n// module chunks = 20","<template>\n  <div>\n\n    <div class=\"ms-doc\">\n      <h3 class=\"clearfix header\">\n        <span class=\"btn_back\" @click=\"handleHome\">设备信息</span>/<span class=\"btn_back\" @click=\"handleBack\">设备详情</span>/设备日志\n\n        <el-button type=\"info\" style=\"float: right\" @click=\"handleLog()\">获取实时LOG</el-button>\n      </h3>\n      <article>\n\n        <span v-if=\"viewList\">暂无数据</span>\n        <!--<div class=\"col-md-8 message\" v-for=\"message in messages\">-->\n          <!--{{ message.msg }}-->\n        <!--</div>-->\n        <!--<form v-on:submit=\"send\">-->\n          <!--<input id=\"message\" v-model=\"message\"/>-->\n          <!--<button class=\"btn btn-primary\">Send</button>-->\n        <!--</form>-->\n\n\n      </article>\n    </div>\n\n  </div>\n</template>\n\n<script>\n\n  export default {\n    data: function () {\n      return {\n        viewList: false,\n        item: \"\",\n        messages: [],\n        message: null,\n        channel:'channel'\n      }\n    },\n    mounted: function () {\n      this.$nextTick(function () {\n        this.detailView();\n      })\n    },\n    methods: {\n           detailView: function () {\n        let self = this,\n          DeviceId = sessionStorage.getItem('DeviceId'),\n          _url = \"/logs/\" + DeviceId,\n          _method = \"GET\",\n          sign1 = sessionStorage.getItem('login_TokenId') + _url + _method,\n          sign = this.md5(sign1) + \",\" + sessionStorage.getItem('login_Signature');\n        //将对象转为字符串\n        //签名的 定义过程\n        this.$http({\n          url: \"/iotadmin\" + _url,\n          method: _method,\n          headers: {\n            'content-type': 'application/json',\n            'Rtt-Sign': sign\n          },\n        }).then((res) => {\n          console.log(res.data)\n          if (res.data == \"\") {\n            this.viewList = false\n          } else {\n            this.viewList = true\n            this.item = res.data\n            console.log(this.item)\n          }\n        }).catch(function (error) {\n          if (error.response) {\n            console.log(error.response.data);\n            console.log(\"222:\" + error.response.status);\n            console.log(\"333:\" + error.response.header);\n            //请求已经发出，但是服务器响应返回的状态吗不在2xx的范围内\n            if (error.response.data.ErrCode = \"40000004\") {\n              self.$message.error('网络错误，请稍后再试');\n            } else {\n              self.$message.error('网络错误，请稍后再试');\n              return false\n            }\n          } else {\n            console.log(error);\n            //一些错误是在设置请求的时候触发\n            console.log('Error', error.message);\n            return false\n          };\n        });\n      },\n      send : function(e) {\n        e.preventDefault();\n        console.log(this.message);\n        if(this.message) {\n          ws.send(this.message);\n        }\n        this.message = null;\n      },\n\n      handleLog() {\n        var ws = new WebSocket(\"ws://116.62.23.166:8095/log\");\n             console.log(111)\n        ws.onopen = function(){\n          console.log('已连接')\n         // console.log(\"message:\",message)\n          //ws.send(message);\n        };\n        ws.onmessage = function(evt){\n          console.log(evt.data);\n          //ws.close();\n        };\n        //        ws.onclose = function(evt){console.log('WebSocketClosed!');};\n//        ws.onerror = function(evt){console.log('WebSocketError!');};\n\n      },\n      handleHome(back) {\n        this.$router.go(-2);\n      },\n      handleBack(back) {\n        this.$router.go(-1);\n      },\n    }\n  }\n\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// DeviceLog.vue?51e1282a","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"DeviceLog.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-3119d868\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/device/DeviceLog.vue\n// module id = 249\n// module chunks = 20","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3119d868\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./DeviceLog.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"15ebe63d\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-3119d868\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/device/DeviceLog.vue\n// module id = 273\n// module chunks = 20","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', {\n    staticClass: \"ms-doc\"\n  }, [_c('h3', {\n    staticClass: \"clearfix header\"\n  }, [_c('span', {\n    staticClass: \"btn_back\",\n    on: {\n      \"click\": _vm.handleHome\n    }\n  }, [_vm._v(\"设备信息\")]), _vm._v(\"/\"), _c('span', {\n    staticClass: \"btn_back\",\n    on: {\n      \"click\": _vm.handleBack\n    }\n  }, [_vm._v(\"设备详情\")]), _vm._v(\"/设备日志\\n\\n      \"), _c('el-button', {\n    staticStyle: {\n      \"float\": \"right\"\n    },\n    attrs: {\n      \"type\": \"info\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.handleLog()\n      }\n    }\n  }, [_vm._v(\"获取实时LOG\")])], 1), _vm._v(\" \"), _c('article', [(_vm.viewList) ? _c('span', [_vm._v(\"暂无数据\")]) : _vm._e()])])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-3119d868\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/device/DeviceLog.vue\n// module id = 301\n// module chunks = 20"],"sourceRoot":""}