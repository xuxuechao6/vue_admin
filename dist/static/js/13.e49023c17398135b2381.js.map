{"version":3,"sources":["webpack:///static/js/13.e49023c17398135b2381.js","webpack:///./src/views/firmware/AddFirmware.vue","webpack:///./~/core-js/library/modules/_core.js?1b62*********","webpack:///./~/babel-runtime/core-js/json/stringify.js?4574*******","webpack:///./~/core-js/library/fn/json/stringify.js?6708*******","webpack:///AddFirmware.vue","webpack:///./src/views/firmware/AddFirmware.vue?68aa","webpack:///./src/views/firmware/AddFirmware.vue?4800","webpack:///./src/views/firmware/AddFirmware.vue?4a8f"],"names":["webpackJsonp","119","module","exports","__webpack_require__","injectStyle","ssrContext","Component","132","core","version","__e","137","default","__esModule","138","$JSON","JSON","stringify","it","apply","arguments","232","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","n","data","restaurants","fileList","ruleForm","FileUrl","FileSize","FileName","FileMd5","Type","Version","Description","rules","required","message","trigger","file","mounted","this","loadAll","methods","handleBack","back","$router","go","querySearch","queryString","cb","filter","createFilter","restaurant","indexOf","toLowerCase","handleRemove","handleChange","slice","name","handleSuccess","response","handleError","err","console","log","submitForm","formName","_this","self","productId","sessionStorage","getItem","_url","_body","Name","body","sign1","sign","md5","$refs","validate","valid","$http","url","method","headers","content-type","Rtt-Sign","then","res","add_suc","catch","error","add_err","status","$notify","title","type","newId","newName","push","path","params","productName","$message","ErrCode","escForm","260","i","sources","names","mappings","sourcesContent","sourceRoot","284","content","locals","312","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","_v","ref","attrs","model","label-width","label","prop","fetch-suggestions","placeholder","callback","$$v","expression","action","on-change","file-list","multiple","on-error","on-success","on-remove","auto-upload","size","slot","$event","staticRenderFns"],"mappings":"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","file":"static/js/13.e49023c17398135b2381.js","sourcesContent":["webpackJsonp([13],{\n\n/***/ 119:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(284)\n}\nvar Component = __webpack_require__(41)(\n  /* script */\n  __webpack_require__(232),\n  /* template */\n  __webpack_require__(312),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-8f1f400a\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 132:\n/***/ (function(module, exports) {\n\nvar core = module.exports = { version: '2.5.0' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n\n/***/ }),\n\n/***/ 137:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = { \"default\": __webpack_require__(138), __esModule: true };\n\n/***/ }),\n\n/***/ 138:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar core = __webpack_require__(132);\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n/***/ }),\n\n/***/ 232:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(137);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  data: function data() {\n    return {\n      // myHeaders:{\n      //   'content-type': 'multipart/form‐data; boundary=‐‐‐‐‐‐‐‐‐‐e952703614f8bac',\n      //      },\n      restaurants: [],\n      fileList: [],\n      ruleForm: {\n        FileUrl: '',\n        FileSize: '',\n        FileName: '',\n        FileMd5: '',\n        Type: '',\n        Version: '',\n        Description: ''\n      },\n      rules: {\n        Type: [{\n          required: true,\n          message: '请输入固件类型'\n        }],\n        Version: [{\n          required: true,\n          message: '请输入固件版本号',\n          trigger: 'blur'\n        }],\n        file: [{\n          required: true,\n          message: '请上传固件文件'\n        }]\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.restaurants = this.loadAll();\n  },\n\n  methods: {\n    handleBack: function handleBack(back) {\n      this.$router.go(-1);\n    },\n\n    //带建议的输入框\n    loadAll: function loadAll() {\n      return [{ \"value\": \"firmware\" }, { \"value\": \"filesystem\" }];\n    },\n    querySearch: function querySearch(queryString, cb) {\n      var restaurants = this.restaurants;\n      var results = queryString ? restaurants.filter(this.createFilter(queryString)) : restaurants;\n      // 调用 callback 返回建议列表的数据\n      cb(results);\n    },\n    createFilter: function createFilter(queryString) {\n      return function (restaurant) {\n        return restaurant.value.indexOf(queryString.toLowerCase()) === 0;\n      };\n    },\n    handleRemove: function handleRemove(file, fileList) {},\n    handleChange: function handleChange(file, fileList) {\n      this.fileList = fileList.slice(-1);\n      this.ruleForm.FileName = file.name;\n    },\n    handleSuccess: function handleSuccess(response) {\n      this.ruleForm.FileUrl = response.FileUrl, this.ruleForm.FileSize = response.FileSize, this.ruleForm.FileMd5 = response.FileMd5;\n    },\n    handleError: function handleError(err, file, fileList) {\n      console.log(err.response);\n    },\n    submitForm: function submitForm(formName) {\n      var _this = this;\n\n      var self = this,\n          productId = sessionStorage.getItem('productId'),\n          _url = \"/products/\" + productId + \"/firmware\",\n          _method = \"POST\",\n          _body = { //定义要传过去的参数\n        'Type': self.ruleForm.Type,\n        'Version': self.ruleForm.Version,\n        'Description': self.ruleForm.Description,\n        'FileSize': self.ruleForm.FileSize,\n        'FileMd5': self.ruleForm.FileMd5,\n        'FileUrl': self.ruleForm.FileUrl,\n        'Name': self.ruleForm.FileName\n      },\n          body = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(_body),\n          sign1 = sessionStorage.getItem('login_TokenId') + _url + _method + body,\n          sign = this.md5(sign1) + \",\" + sessionStorage.getItem('login_Signature');\n      //将对象转为字符串\n      //验证数据后 与后台交互\n      self.$refs[formName].validate(function (valid) {\n        if (valid) {\n          //发起HTTP请求   然后定义需要请求的参数\n          _this.$http({\n            url: \"/iotadmin\" + _url, //请求的地址\n            method: _method, //请求的方式\n            headers: { //定义 请求的头部内容\n              'content-type': 'application/json',\n              'Rtt-Sign': sign //自定义的请求的头部内容（签名作用）\n            },\n            data: body //传过去的参数\n          }, body).then(function (res) {\n            //请求成功后\n            _this.add_suc(res);\n          }).catch(function (error) {\n            //请求失败后\n            console.log(\"error:\" + error);\n            _this.add_err(error);\n          });\n        } else {\n          return false;\n        }\n      });\n      /*this.$router.push('/register2');*/\n    },\n\n    //发送数据成功后\n    add_suc: function add_suc(res) {\n      /*接口的传值是(200,获取信息成功),没有返回值说明没有成功*/\n      if (res.status == 200) {\n        this.$notify({\n          title: 'GOOD',\n          message: '添加新固件成功',\n          type: 'success'\n        });\n        var newId = sessionStorage.getItem(\"productId\"),\n            newName = sessionStorage.getItem(\"productName\");\n        this.$router.push({\n          path: '/firmwareList/:productId',\n          name: 'firmwareList',\n          params: {\n            productId: newId,\n            productName: newName\n          }\n        });\n      } else {\n        this.$message.error('添加新固件失败');\n      }\n    },\n\n    //发送数据失败后\n    add_err: function add_err(error) {\n      var self = this;\n      if (error.response) {\n        console.log(error.response.data);\n        console.log(error.response.data.ErrCode);\n        //请求已经发出，但是服务器响应返回的状态吗不在2xx的范围内\n        if (error.response.data.ErrCode == 40000101) {\n          self.$message.error('该固件已存在，请添加新产品');\n        } else {\n          self.$message.error('添加新固件失败，请稍候再试');\n          return false;\n        }\n      } else {\n        //一些错误是在设置请求的时候触发\n        console.log('Error', error.message);\n        self.$message.error('网络错误，请稍候再试');\n        return false;\n      }\n    },\n    escForm: function escForm() {\n      var newId = sessionStorage.getItem(\"productId\"),\n          newName = sessionStorage.getItem(\"productName\");\n      console.log('newId:' + newId);\n      this.$router.push({\n        path: '/firmwareList/:productId',\n        name: 'firmwareList',\n        params: {\n          productId: newId,\n          productName: newName\n        }\n      });\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 260:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(105)(true);\n// imports\n\n\n// module\nexports.push([module.i, \".ms-doc[data-v-8f1f400a]{width:100%;max-width:980px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif}.ms-doc h3[data-v-8f1f400a]{padding:9px 10px 10px;margin:0;font-size:14px;line-height:17px;background-color:#f5f5f5;border:1px solid #d8d8d8;border-bottom:0;border-radius:3px 3px 0 0}.ms-doc article[data-v-8f1f400a]{padding:45px;word-wrap:break-word;background-color:#fff;border:1px solid #ddd;border-bottom-right-radius:3px;border-bottom-left-radius:3px}.ms-doc article .el-input[data-v-8f1f400a]{width:300px}\", \"\", {\"version\":3,\"sources\":[\"C:/Users/Administrator/Desktop/realthread_IoT/vue_admin/src/views/firmware/AddFirmware.vue\"],\"names\":[],\"mappings\":\"AACA,yBACE,WAAY,AACZ,gBAAiB,AACjB,gFAAyF,CAC1F,AACD,4BACE,sBAAuB,AACvB,SAAU,AACV,eAAgB,AAChB,iBAAkB,AAClB,yBAA0B,AAC1B,yBAA0B,AAC1B,gBAAiB,AACjB,yBAA2B,CAC5B,AACD,iCACE,aAAc,AACd,qBAAsB,AACtB,sBAAuB,AACvB,sBAAuB,AACvB,+BAAgC,AAChC,6BAA+B,CAChC,AACD,2CACE,WAAa,CACd\",\"file\":\"AddFirmware.vue\",\"sourcesContent\":[\"\\n.ms-doc[data-v-8f1f400a] {\\n  width: 100%;\\n  max-width: 980px;\\n  font-family: -apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Helvetica, Arial, sans-serif;\\n}\\n.ms-doc h3[data-v-8f1f400a] {\\n  padding: 9px 10px 10px;\\n  margin: 0;\\n  font-size: 14px;\\n  line-height: 17px;\\n  background-color: #f5f5f5;\\n  border: 1px solid #d8d8d8;\\n  border-bottom: 0;\\n  border-radius: 3px 3px 0 0;\\n}\\n.ms-doc article[data-v-8f1f400a] {\\n  padding: 45px;\\n  word-wrap: break-word;\\n  background-color: #fff;\\n  border: 1px solid #ddd;\\n  border-bottom-right-radius: 3px;\\n  border-bottom-left-radius: 3px;\\n}\\n.ms-doc article .el-input[data-v-8f1f400a] {\\n  width: 300px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 284:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(260);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(106)(\"6ff894bb\", content, true);\n\n/***/ }),\n\n/***/ 312:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', {\n    staticClass: \"ms-doc\"\n  }, [_c('h3', [_c('span', {\n    staticClass: \"btn_back\",\n    on: {\n      \"click\": _vm.handleBack\n    }\n  }, [_vm._v(\"模块管理\")]), _vm._v(\"/添加新固件\")]), _vm._v(\" \"), _c('article', [_c('el-form', {\n    ref: \"ruleForm\",\n    staticClass: \"demo-ruleForm\",\n    attrs: {\n      \"model\": _vm.ruleForm,\n      \"rules\": _vm.rules,\n      \"label-width\": \"140px\"\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"固件类型：\",\n      \"prop\": \"Type\"\n    }\n  }, [_c('el-autocomplete', {\n    staticClass: \"inline-input\",\n    attrs: {\n      \"fetch-suggestions\": _vm.querySearch,\n      \"placeholder\": \"请输入固件类型\"\n    },\n    model: {\n      value: (_vm.ruleForm.Type),\n      callback: function($$v) {\n        _vm.ruleForm.Type = $$v\n      },\n      expression: \"ruleForm.Type\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"固件版本号：\",\n      \"prop\": \"Version\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.ruleForm.Version),\n      callback: function($$v) {\n        _vm.ruleForm.Version = $$v\n      },\n      expression: \"ruleForm.Version\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"上传固件文件：\"\n    }\n  }, [_c('el-upload', {\n    staticClass: \"upload-demo\",\n    attrs: {\n      \"action\": \"iotadmin/firmwares/file\",\n      \"on-change\": _vm.handleChange,\n      \"file-list\": _vm.fileList,\n      \"multiple\": false,\n      \"on-error\": _vm.handleError,\n      \"on-success\": _vm.handleSuccess,\n      \"on-remove\": _vm.handleRemove,\n      \"auto-upload\": true\n    }\n  }, [_c('el-button', {\n    attrs: {\n      \"size\": \"small\",\n      \"type\": \"primary\"\n    }\n  }, [_vm._v(\"点击上传\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"el-upload__tip\",\n    slot: \"tip\"\n  }, [_vm._v(\"请上传类型匹配的固件\")])], 1)], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"版本说明：\",\n      \"prop\": \"Description\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"type\": \"textarea\"\n    },\n    model: {\n      value: (_vm.ruleForm.Description),\n      callback: function($$v) {\n        _vm.ruleForm.Description = $$v\n      },\n      expression: \"ruleForm.Description\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.submitForm('ruleForm')\n      }\n    }\n  }, [_vm._v(\"立即创建\")]), _vm._v(\" \"), _c('el-button', {\n    on: {\n      \"click\": _vm.escForm\n    }\n  }, [_vm._v(\"取消\")])], 1)], 1)], 1)])])\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/13.e49023c17398135b2381.js","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-8f1f400a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./AddFirmware.vue\")\n}\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./AddFirmware.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8f1f400a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./AddFirmware.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-8f1f400a\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/firmware/AddFirmware.vue\n// module id = 119\n// module chunks = 13","var core = module.exports = { version: '2.5.0' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/modules/_core.js\n// module id = 132\n// module chunks = 0 1 2 3 4 5 7 9 11 12 13 14 15","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/json/stringify.js\n// module id = 137\n// module chunks = 0 2 3 4 7 9 11 12 13 14 15","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/json/stringify.js\n// module id = 138\n// module chunks = 0 2 3 4 7 9 11 12 13 14 15","<template>\n  <div>\n    <div class=\"ms-doc\">\n      <h3><span class=\"btn_back\" @click=\"handleBack\">模块管理</span>/添加新固件</h3>\n      <article>\n        <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"140px\" class=\"demo-ruleForm\">\n\n          <el-form-item label=\"固件类型：\" prop=\"Type\">\n            <el-autocomplete\n              class=\"inline-input\"\n              v-model=\"ruleForm.Type\"\n              :fetch-suggestions=\"querySearch\"\n              placeholder=\"请输入固件类型\"\n            ></el-autocomplete>\n          </el-form-item>\n\n          <el-form-item label=\"固件版本号：\" prop=\"Version\">\n            <el-input v-model=\"ruleForm.Version\"></el-input>\n          </el-form-item>\n\n          <el-form-item label=\"上传固件文件：\">\n            <el-upload\n              class=\"upload-demo\"\n              action=\"iotadmin/firmwares/file\"\n              :on-change=\"handleChange\"\n              :file-list=\"fileList\"\n              :multiple=\"false\"\n              :on-error=\"handleError\"\n              :on-success=\"handleSuccess\"\n              :on-remove=\"handleRemove\"\n              :auto-upload=\"true\">\n              <el-button size=\"small\" type=\"primary\" >点击上传</el-button>\n              <div slot=\"tip\" class=\"el-upload__tip\">请上传类型匹配的固件</div>\n            </el-upload>\n          </el-form-item>\n          <el-form-item label=\"版本说明：\" prop=\"Description\">\n            <el-input type=\"textarea\" v-model=\"ruleForm.Description\"></el-input>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">立即创建</el-button>\n            <el-button @click=\"escForm\">取消</el-button>\n          </el-form-item>\n        </el-form>\n      </article>\n    </div>\n\n  </div>\n</template>\n\n<script>\n  export default {\n    data() {\n      return {\n        // myHeaders:{\n        //   'content-type': 'multipart/form‐data; boundary=‐‐‐‐‐‐‐‐‐‐e952703614f8bac',\n        //      },\n        restaurants: [],\n        fileList: [],\n        ruleForm: {\n          FileUrl:'',\n          FileSize:'',\n          FileName:'',\n          FileMd5:'',\n          Type: '',\n          Version: '',\n          Description: '',\n        },\n        rules: {\n          Type: [{\n            required: true,\n            message: '请输入固件类型',\n          }],\n          Version: [{\n            required: true,\n            message: '请输入固件版本号',\n            trigger: 'blur'\n          }],\n          file: [{\n            required: true,\n            message: '请上传固件文件',\n          }]\n        }\n      };\n    },\n    mounted() {\n      this.restaurants = this.loadAll();\n    },\n    methods: {\n       handleBack(back) {\n\t\t\t\tthis.$router.go(-1);\n\t\t\t},\n      //带建议的输入框\n      loadAll() {\n        return[\n          { \"value\": \"firmware\"},\n          { \"value\": \"filesystem\"},\n        ];\n      },\n      querySearch(queryString, cb) {\n        var restaurants = this.restaurants;\n        var results = queryString ? restaurants.filter(this.createFilter(queryString)) : restaurants;\n        // 调用 callback 返回建议列表的数据\n        cb(results);\n      },\n      createFilter(queryString) {\n        return (restaurant) => {\n          return (restaurant.value.indexOf(queryString.toLowerCase()) === 0);\n        };\n      },\n\n      handleRemove(file, fileList) {\n      },\n      handleChange(file, fileList) {\n        this.fileList = fileList.slice(-1);\n        this.ruleForm.FileName=file.name;\n      },\n      handleSuccess(response){\n        this.ruleForm.FileUrl=response.FileUrl,\n          this.ruleForm.FileSize=response.FileSize,\n          this.ruleForm.FileMd5=response.FileMd5;\n      },\n      handleError(err,file,fileList){\nconsole.log(err.response)\n      },\n\n      submitForm(formName) {\n        let self = this,\n          productId = sessionStorage.getItem('productId'),\n          _url = \"/products/\" + productId + \"/firmware\",\n          _method = \"POST\",\n          _body = {            //定义要传过去的参数\n            'Type': self.ruleForm.Type,\n            'Version': self.ruleForm.Version,\n            'Description': self.ruleForm.Description,\n            'FileSize': self.ruleForm.FileSize,\n            'FileMd5': self.ruleForm.FileMd5,\n            'FileUrl': self.ruleForm.FileUrl,\n            'Name': self.ruleForm.FileName,\n          },\n          body = JSON.stringify(_body),\n          sign1 = sessionStorage.getItem('login_TokenId') + _url + _method + body,\n          sign = this.md5(sign1) + \",\" + sessionStorage.getItem('login_Signature');\n        //将对象转为字符串\n            //验证数据后 与后台交互\n            self.$refs[formName].validate((valid) => {\n                if (valid) {\n                    //发起HTTP请求   然后定义需要请求的参数\n                    this.$http({\n                        url: \"/iotadmin\" + _url, //请求的地址\n                        method: _method, //请求的方式\n                        headers: { //定义 请求的头部内容\n                            'content-type': 'application/json',\n                            'Rtt-Sign': sign //自定义的请求的头部内容（签名作用）\n                        },\n                        data: body, //传过去的参数\n                    }, body).then((res) => { //请求成功后\n                        this.add_suc(res)\n\n                    }).catch((error) => { //请求失败后\n                        console.log(\"error:\" + error)\n                        this.add_err(error)\n                    });\n                } else {\n                    return false;\n                }\n            });\n        /*this.$router.push('/register2');*/\n      },\n      //发送数据成功后\n      add_suc(res) {\n        /*接口的传值是(200,获取信息成功),没有返回值说明没有成功*/\n        if (res.status == 200) {\n          this.$notify({\n            title: 'GOOD',\n            message: '添加新固件成功',\n            type: 'success'\n          });\n          let newId = sessionStorage.getItem(\"productId\"),\n            newName = sessionStorage.getItem(\"productName\");\n          this.$router.push({\n            path: '/firmwareList/:productId',\n            name: 'firmwareList',\n            params: {\n              productId: newId,\n              productName: newName\n            }\n          })\n        } else {\n          this.$message.error('添加新固件失败');\n        }\n\n      },\n      //发送数据失败后\n      add_err(error) {\n        var self = this;\n        if (error.response) {\n          console.log(error.response.data);\n          console.log(error.response.data.ErrCode);\n          //请求已经发出，但是服务器响应返回的状态吗不在2xx的范围内\n          if (error.response.data.ErrCode == 40000101) {\n            self.$message.error('该固件已存在，请添加新产品');\n          } else {\n            self.$message.error('添加新固件失败，请稍候再试');\n            return false;\n          }\n        } else {\n          //一些错误是在设置请求的时候触发\n          console.log('Error', error.message);\n          self.$message.error('网络错误，请稍候再试');\n          return false;\n        }\n\n      },\n\n      escForm() {\n        let newId = sessionStorage.getItem(\"productId\"),\n          newName = sessionStorage.getItem(\"productName\");\n        console.log('newId:' + newId)\n        this.$router.push({\n          path: '/firmwareList/:productId',\n          name: 'firmwareList',\n          params: {\n            productId: newId,\n            productName: newName\n          }\n        })\n      },\n    }\n  }\n</script>\n\n<style scoped>\n  .ms-doc {\n    width: 100%;\n    max-width: 980px;\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Helvetica, Arial, sans-serif;\n  }\n\n  .ms-doc h3 {\n    padding: 9px 10px 10px;\n    margin: 0;\n    font-size: 14px;\n    line-height: 17px;\n    background-color: #f5f5f5;\n    border: 1px solid #d8d8d8;\n    border-bottom: 0;\n    border-radius: 3px 3px 0 0;\n  }\n\n  .ms-doc article {\n    padding: 45px;\n    word-wrap: break-word;\n    background-color: #fff;\n    border: 1px solid #ddd;\n    border-bottom-right-radius: 3px;\n    border-bottom-left-radius: 3px;\n  }\n\n  .ms-doc article .el-input {\n    width: 300px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// AddFirmware.vue?520787de","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".ms-doc[data-v-8f1f400a]{width:100%;max-width:980px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif}.ms-doc h3[data-v-8f1f400a]{padding:9px 10px 10px;margin:0;font-size:14px;line-height:17px;background-color:#f5f5f5;border:1px solid #d8d8d8;border-bottom:0;border-radius:3px 3px 0 0}.ms-doc article[data-v-8f1f400a]{padding:45px;word-wrap:break-word;background-color:#fff;border:1px solid #ddd;border-bottom-right-radius:3px;border-bottom-left-radius:3px}.ms-doc article .el-input[data-v-8f1f400a]{width:300px}\", \"\", {\"version\":3,\"sources\":[\"C:/Users/Administrator/Desktop/realthread_IoT/vue_admin/src/views/firmware/AddFirmware.vue\"],\"names\":[],\"mappings\":\"AACA,yBACE,WAAY,AACZ,gBAAiB,AACjB,gFAAyF,CAC1F,AACD,4BACE,sBAAuB,AACvB,SAAU,AACV,eAAgB,AAChB,iBAAkB,AAClB,yBAA0B,AAC1B,yBAA0B,AAC1B,gBAAiB,AACjB,yBAA2B,CAC5B,AACD,iCACE,aAAc,AACd,qBAAsB,AACtB,sBAAuB,AACvB,sBAAuB,AACvB,+BAAgC,AAChC,6BAA+B,CAChC,AACD,2CACE,WAAa,CACd\",\"file\":\"AddFirmware.vue\",\"sourcesContent\":[\"\\n.ms-doc[data-v-8f1f400a] {\\n  width: 100%;\\n  max-width: 980px;\\n  font-family: -apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Helvetica, Arial, sans-serif;\\n}\\n.ms-doc h3[data-v-8f1f400a] {\\n  padding: 9px 10px 10px;\\n  margin: 0;\\n  font-size: 14px;\\n  line-height: 17px;\\n  background-color: #f5f5f5;\\n  border: 1px solid #d8d8d8;\\n  border-bottom: 0;\\n  border-radius: 3px 3px 0 0;\\n}\\n.ms-doc article[data-v-8f1f400a] {\\n  padding: 45px;\\n  word-wrap: break-word;\\n  background-color: #fff;\\n  border: 1px solid #ddd;\\n  border-bottom-right-radius: 3px;\\n  border-bottom-left-radius: 3px;\\n}\\n.ms-doc article .el-input[data-v-8f1f400a] {\\n  width: 300px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-8f1f400a\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/firmware/AddFirmware.vue\n// module id = 260\n// module chunks = 13","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-8f1f400a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./AddFirmware.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"6ff894bb\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-8f1f400a\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/firmware/AddFirmware.vue\n// module id = 284\n// module chunks = 13","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', {\n    staticClass: \"ms-doc\"\n  }, [_c('h3', [_c('span', {\n    staticClass: \"btn_back\",\n    on: {\n      \"click\": _vm.handleBack\n    }\n  }, [_vm._v(\"模块管理\")]), _vm._v(\"/添加新固件\")]), _vm._v(\" \"), _c('article', [_c('el-form', {\n    ref: \"ruleForm\",\n    staticClass: \"demo-ruleForm\",\n    attrs: {\n      \"model\": _vm.ruleForm,\n      \"rules\": _vm.rules,\n      \"label-width\": \"140px\"\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"固件类型：\",\n      \"prop\": \"Type\"\n    }\n  }, [_c('el-autocomplete', {\n    staticClass: \"inline-input\",\n    attrs: {\n      \"fetch-suggestions\": _vm.querySearch,\n      \"placeholder\": \"请输入固件类型\"\n    },\n    model: {\n      value: (_vm.ruleForm.Type),\n      callback: function($$v) {\n        _vm.ruleForm.Type = $$v\n      },\n      expression: \"ruleForm.Type\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"固件版本号：\",\n      \"prop\": \"Version\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.ruleForm.Version),\n      callback: function($$v) {\n        _vm.ruleForm.Version = $$v\n      },\n      expression: \"ruleForm.Version\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"上传固件文件：\"\n    }\n  }, [_c('el-upload', {\n    staticClass: \"upload-demo\",\n    attrs: {\n      \"action\": \"iotadmin/firmwares/file\",\n      \"on-change\": _vm.handleChange,\n      \"file-list\": _vm.fileList,\n      \"multiple\": false,\n      \"on-error\": _vm.handleError,\n      \"on-success\": _vm.handleSuccess,\n      \"on-remove\": _vm.handleRemove,\n      \"auto-upload\": true\n    }\n  }, [_c('el-button', {\n    attrs: {\n      \"size\": \"small\",\n      \"type\": \"primary\"\n    }\n  }, [_vm._v(\"点击上传\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"el-upload__tip\",\n    slot: \"tip\"\n  }, [_vm._v(\"请上传类型匹配的固件\")])], 1)], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"版本说明：\",\n      \"prop\": \"Description\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"type\": \"textarea\"\n    },\n    model: {\n      value: (_vm.ruleForm.Description),\n      callback: function($$v) {\n        _vm.ruleForm.Description = $$v\n      },\n      expression: \"ruleForm.Description\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.submitForm('ruleForm')\n      }\n    }\n  }, [_vm._v(\"立即创建\")]), _vm._v(\" \"), _c('el-button', {\n    on: {\n      \"click\": _vm.escForm\n    }\n  }, [_vm._v(\"取消\")])], 1)], 1)], 1)])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-8f1f400a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/firmware/AddFirmware.vue\n// module id = 312\n// module chunks = 13"],"sourceRoot":""}