webpackJsonp([19],{121:function(e,t,o){function n(e){o(280)}var r=o(41)(o(234),o(308),n,"data-v-6bef23ec",null);e.exports=r.exports},151:function(e,t,o){"use strict";function n(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var o={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var n in o)if(new RegExp("("+n+")").test(t)){var a=o[n]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?a:r(a))}return t}function r(e){return("00"+e).substr(e.length)}t.a=n},234:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(151);t.default={data:function(){return{showList:!1,Results:[],Results2:[]}},watch:{$route:"listView"},mounted:function(){this.$nextTick(function(){this.listView()})},methods:{sizeFormat:function(e,t){var o=e.FileSize;if(null==o||""==o)return"0 Bytes";var n=new Array("Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"),r=0,a=parseFloat(o);r=Math.floor(Math.log(a)/Math.log(1024));var s=a/Math.pow(1024,r);return(s=s.toFixed(2))+"  "+n[r]},dateFormat:function(e,t){var r=new Date(1e3*e.CreatedTime);return o.i(n.a)(r,"yyyy-MM-dd hh:mm")},fileUrlFormat:function(e,t){return"<a href='"+e.FileUrl+"' >下载</a>"},isReleaseFormat:function(e,t){return 0==e.IsRelease?"否":1==e.IsRelease?"是":"未知"},listView:function(){var e=this,t=sessionStorage.getItem("productId"),o="/products/"+t+"/firmware",n=sessionStorage.getItem("login_TokenId")+o+"GET",r=this.md5(n)+","+sessionStorage.getItem("login_Signature");console.log(n),console.log(r),this.$http({url:"/iotadmin"+o,method:"GET",headers:{"content-type":"application/json","Rtt-Sign":r}}).then(function(t){console.log(t.data),null==t.data.Results?(console.log(2222),e.showList=!1):(e.productNum=!0,e.Results=t.data.Results,e.showList=!0,console.log(e.Results))}).catch(function(e){return e.response?(console.log(e.response.data),console.log("222:"+e.response.status),console.log("333:"+e.response.header),(e.response.data.ErrCode="40000004")?void self.$message.error("网络错误，请稍后再试"):(self.$message.error("网络错误，请稍后再试"),!1)):(console.log(e),console.log("Error",e.message),!1)})},handleAdd:function(){var e=sessionStorage.getItem("productId");this.$router.push({path:"/addFirmware/:firmwareId",name:"addFirmware",params:{firmwareId:e}})},handleDownLoad:function(e){return e.FileUrl},handleDownLoad2:function(e){return e.Name},handleEdit:function(e){sessionStorage.setItem("FirmwareId",e.FirmwareId),this.$router.push("/firmwareEdit")},handleTouch:function(e){var t=(sessionStorage.getItem("productId"),"/firmwares/file"+e.FileUrl.substring(e.FileUrl.lastIndexOf("/"))),o=sessionStorage.getItem("login_TokenId")+t+"GET",n=this.md5(o)+","+sessionStorage.getItem("login_Signature");fetch("/iotadmin"+t,{isDownload:!0,method:"GET",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/font-woff","Rtt-Sign":n}}).then(function(t){var o=document.createElement("a"),n=e.FileUrl,r=e.Name;o.href=n,o.download=r,o.click()})},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该产品信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(e),t.handleDelete2(e)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleDelete2:function(e){var t=this,o=this,n=sessionStorage.getItem("productId"),r="/products/"+n+"/firmware/"+e.FirmwareId,a=sessionStorage.getItem("login_TokenId")+r+"DELETE",s=this.md5(a)+","+sessionStorage.getItem("login_Signature");this.$http({url:"/iotadmin"+r,method:"DELETE",headers:{"content-type":"application/json","Rtt-Sign":s}}).then(function(e){console.log(e.data),""==e.data?(t.$message({type:"success",message:"删除成功!"}),t.showList=!1,t.listView()):t.$message({type:"info",message:"删除失败"})}).catch(function(e){return e.response?(console.log(e),console.log(e.response.data),console.log(e.response.data.ErrCode),(e.response.data.ErrCode="40000303")?void o.$message.error("已发布版本的固件无法被删除"):(o.$message.error("网络错误，请稍后再试"),!1)):(console.log("Error",e.message),!1)})}}}},256:function(e,t,o){t=e.exports=o(105)(!0),t.push([e.i,".font_none[data-v-6bef23ec]{color:#999}.ms-doc h3[data-v-6bef23ec]{padding:9px 10px 10px;margin:0;font-size:14px;line-height:25px;background-color:#f5f5f5;border:1px solid #d8d8d8;border-bottom:0;border-radius:3px 3px 0 0}.ms-doc article[data-v-6bef23ec]{padding:45px;word-wrap:break-word;background-color:#fff;border:1px solid #ddd;border-bottom-right-radius:3px;border-bottom-left-radius:3px}.ms-doc article>div[data-v-6bef23ec]{padding:10px 0}.ms-doc article th[data-v-6bef23ec]{min-width:120px;display:block;text-align:center!important}.downLoad[data-v-6bef23ec]{color:#20a0ff}","",{version:3,sources:["C:/Users/Administrator/Desktop/realthread_IoT/vue_admin/src/views/firmware/FirmwareList.vue"],names:[],mappings:"AACA,4BACE,UAAY,CACb,AACD,4BACE,sBAAuB,AACvB,SAAU,AACV,eAAgB,AAChB,iBAAkB,AAClB,yBAA0B,AAC1B,yBAA0B,AAC1B,gBAAiB,AACjB,yBAA2B,CAC5B,AACD,iCACE,aAAc,AACd,qBAAsB,AACtB,sBAAuB,AACvB,sBAAuB,AACvB,+BAAgC,AAChC,6BAA+B,CAChC,AACD,qCACE,cAAgB,CACjB,AACD,oCACE,gBAAiB,AACjB,cAAe,AACf,2BAA8B,CAC/B,AACD,2BACE,aAAc,CACf",file:"FirmwareList.vue",sourcesContent:["\n.font_none[data-v-6bef23ec] {\n  color: #999;\n}\n.ms-doc h3[data-v-6bef23ec] {\n  padding: 9px 10px 10px;\n  margin: 0;\n  font-size: 14px;\n  line-height: 25px;\n  background-color: #f5f5f5;\n  border: 1px solid #d8d8d8;\n  border-bottom: 0;\n  border-radius: 3px 3px 0 0;\n}\n.ms-doc article[data-v-6bef23ec] {\n  padding: 45px;\n  word-wrap: break-word;\n  background-color: #fff;\n  border: 1px solid #ddd;\n  border-bottom-right-radius: 3px;\n  border-bottom-left-radius: 3px;\n}\n.ms-doc article > div[data-v-6bef23ec] {\n  padding: 10px 0;\n}\n.ms-doc article th[data-v-6bef23ec] {\n  min-width: 120px;\n  display: block;\n  text-align: center !important;\n}\n.downLoad[data-v-6bef23ec]{\n  color:#20a0ff;\n}\n"],sourceRoot:""}])},280:function(e,t,o){var n=o(256);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);o(106)("44665a20",n,!0)},308:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"ms-doc"},[o("h3",{staticClass:"clearfix header"},[e._v("\n      模块管理\n      "),o("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("+ 添加固件")])],1),e._v(" "),o("article",[e.showList?e._e():o("span",{staticClass:"font_none"},[e._v("暂无模块")]),e._v(" "),e.showList?o("el-table",{staticClass:"table",attrs:{data:e.Results,border:"","default-sort":{prop:"date",order:"descending"}}},[o("el-table-column",{attrs:{prop:"Type",label:"固件型号",align:"center",width:"110"}}),e._v(" "),o("el-table-column",{attrs:{prop:"Version",label:"固件版本号",align:"center",width:"110"}}),e._v(" "),o("el-table-column",{attrs:{prop:"Name",label:"文件名字",align:"center",width:"200"}}),e._v(" "),o("el-table-column",{attrs:{prop:"FileSize",formatter:e.sizeFormat,label:"文件大小",align:"center",width:"120"}}),e._v(" "),o("el-table-column",{attrs:{prop:"IsRelease",label:"是否发布",formatter:e.isReleaseFormat,align:"center",width:"95"}}),e._v(" "),o("el-table-column",{attrs:{label:"下载固件","v-html":e.fileUrlFormat,align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("a",{staticClass:"downLoad",on:{click:function(o){e.handleTouch(t.row)}}},[e._v("下载")])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"CreatedTime",formatter:e.dateFormat,label:"创建时间",align:"center",width:"115"}}),e._v(" "),o("el-table-column",{attrs:{label:"操作",align:"center",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"small",type:"info"},on:{click:function(o){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(o){e.handleDelete(t.row)}}},[e._v("删除")])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"Description",label:"描述"}})],1):e._e()],1)])])},staticRenderFns:[]}}});
//# sourceMappingURL=19.0cf12f8d5156bae1b41e.js.map